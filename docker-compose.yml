version: '3'

services:
  openvpn:
    build: .
    cap_add:
      - NET_ADMIN
    ports:
      - "1194:1194/udp"
    volumes:
      # 挂载自定义证书（可选）
      - ./custom-certs:/etc/openvpn/certs:ro
      # 持久化自动生成的证书
      - ovpn-certs:/etc/openvpn/certs
    environment:
      # 证书生成控制
      - GENERATE_CERTS=${GENERATE_CERTS:-true}  # 是否自动生成证书
      - FORCE_REGENERATE=false                  # 是否强制重新生成
      # 其他环境变量...
      - OVPN_PORT=1194
      - LDAP_URL=ldap://your.ldap.server

volumes:
  ovpn-certs:  # 用于存储自动生成的证书